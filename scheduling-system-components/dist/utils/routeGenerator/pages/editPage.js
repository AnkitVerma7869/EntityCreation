"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateEditPage = generateEditPage;
function generateEditPage(config) {
    return "\n    'use client';\n    import { useState, useEffect } from 'react';\n    import { useRouter } from 'next/navigation';\n    import { \n      DataGrid, \n      GridColDef,\n      GridToolbar,\n      GridPaginationModel \n    } from '@mui/x-data-grid';\n    import { Box } from '@mui/material';\n\n    interface Record {\n      id: string | number;\n      ".concat(config.attributes.map(function (attr) {
        return "".concat(attr.name.replace(/\s+/g, '_'), ": ").concat(attr.dataType.toLowerCase() === 'number' ? 'number' : 'string', ";");
    }).join('\n      '), "\n      createdAt?: string;\n    }\n\n    export default function ").concat(config.entityName.replace(/\s+/g, ''), "EditPage() {\n      const [record, setRecord] = useState<Record | null>(null);\n      const [loading, setLoading] = useState(true);\n      const [saving, setSaving] = useState(false);\n      const router = useRouter();\n\n      useEffect(() => {\n        const searchParams = new URLSearchParams(window.location.search);\n        const id = searchParams.get('id');\n        if (id) fetchRecord(id);\n      }, []);\n\n      const fetchRecord = async (id: string) => {\n        try {\n          const response = await fetch(`/api/").concat(config.entityName.toLowerCase(), "/${id}`);\n          const result = await response.json();\n          if (result.success) {\n            setRecord(result.data);\n          }\n        } catch (error) {\n          console.error('Error fetching record:', error);\n        } finally {\n          setLoading(false);\n        }\n      };\n\n      const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setSaving(true);\n\n        try {\n          const response = await fetch(`/api/").concat(config.entityName.toLowerCase(), "/edit`, {\n            method: 'PUT',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(record),\n          });\n\n          const result = await response.json();\n          if (result.success) {\n            router.push(`/").concat(config.entityName.toLowerCase(), "/list`);\n          }\n        } catch (error) {\n          console.error('Error updating record:', error);\n        } finally {\n          setSaving(false);\n        }\n      };\n\n      if (loading) return <div>Loading...</div>;\n      if (!record) return <div>Record not found</div>;\n\n      return (\n        <div className=\"p-6 max-w-2xl mx-auto\">\n          <h1 className=\"text-2xl font-bold mb-6\">Edit ").concat(config.entityName, "</h1>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            ").concat(config.attributes.map(function (attr) { return "\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  ".concat(attr.name, "\n                </label>\n                <input\n                  type=\"").concat(attr.dataType.toLowerCase() === 'number' ? 'number' : 'text', "\"\n                  value={record?.").concat(attr.name.replace(/\s+/g, '_'), " || ''}\n                  onChange={(e) => setRecord(prev => ({ \n                    ...prev!, \n                    ").concat(attr.name.replace(/\s+/g, '_'), ": e.target.value \n                  }))}\n                  className=\"w-full p-2 border rounded-md\"\n                  required\n                />\n              </div>\n            "); }).join(''), "\n            \n            <div className=\"flex gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => router.back()}\n                className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-blue-300\"\n              >\n                {saving ? 'Saving...' : 'Save'}\n              </button>\n            </div>\n          </form>\n        </div>\n      );\n    }\n  ");
}
